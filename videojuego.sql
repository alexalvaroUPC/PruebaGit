DROP DATABASE IF EXISTS videojuego;
CREATE DATABASE videojuego;

USE videojuego;

CREATE TABLE JUGADOR (
	USERNAME VARCHAR(40),
	PSWRD VARCHAR(50),
	ID INT PRIMARY KEY NOT NULL

)ENGINE=InnoDB;

CREATE TABLE PARTIDA (
	FECHA VARCHAR(10),
	HORA VARCHAR(5),
	DURACION INT NOT NULL,
	GANADOR VARCHAR(40),
	ID INT PRIMARY KEY NOT NULL

)ENGINE=InnoDB;

CREATE TABLE PARTICIPACIONES (
	JUGADOR INT NOT NULL,
	PARTIDA INT NOT NULL,
	
	FOREIGN KEY (JUGADOR) REFERENCES JUGADOR(ID),
	FOREIGN KEY (PARTIDA) REFERENCES PARTIDA(ID)

)ENGINE=InnoDB;

INSERT INTO JUGADOR VALUES ('alexalvaro', 'alex123', 1);
INSERT INTO JUGADOR VALUES ('galderbilbao', 'galder456', 2);
INSERT INTO JUGADOR VALUES ('alvaroceron', 'alvaro789', 3);

INSERT INTO PARTIDA VALUES('01/01/2022','00:01','30','alexalvaro', 1);
INSERT INTO PARTIDA VALUES('01/01/2022','10:45','25','galderbilbao', 2);
INSERT INTO PARTIDA VALUES('02/01/2022','16:32','20','alexalvaro', 3);
INSERT INTO PARTIDA VALUES('03/01/2022','12:43','40','alvaroceron', 4);
INSERT INTO PARTIDA VALUES('06/07/2022','21:09','5','alvaroceron', 5);
INSERT INTO PARTIDA VALUES('05/04/2022','18:15','45','galderbilbao', 6);

INSERT INTO PARTICIPACIONES VALUES(1, 1);
INSERT INTO PARTICIPACIONES VALUES(1, 2);
INSERT INTO PARTICIPACIONES VALUES(1, 3);
INSERT INTO PARTICIPACIONES VALUES(2, 1);
INSERT INTO PARTICIPACIONES VALUES(2, 2);
INSERT INTO PARTICIPACIONES VALUES(2, 3);
INSERT INTO PARTICIPACIONES VALUES(3, 1);
INSERT INTO PARTICIPACIONES VALUES(3, 2);
INSERT INTO PARTICIPACIONES VALUES(3, 3);

SELECT PARTIDA.ID,PARTIDA.FECHA,PARTIDA.DURACION FROM JUGADOR, PARTIDA, PARTICIPACIONES WHERE
PARTIDA.GANADOR = 'alexalvaro' AND
PARTIDA.DURACION = '30' AND
PARTICIPACIONES.JUGADOR = JUGADOR.ID AND
PARTICIPACIONES.PARTIDA = PARTIDA.ID;

